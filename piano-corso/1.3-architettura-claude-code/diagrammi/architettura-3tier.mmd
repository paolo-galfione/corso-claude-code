%%{init: {'theme': 'base', 'themeVariables': {
  'primaryColor': '#e6f3fa',
  'primaryBorderColor': '#005291',
  'primaryTextColor': '#1a1a1a',
  'lineColor': '#0069b4',
  'secondaryColor': '#b3d9f0'
}}}%%
flowchart LR
    subgraph API["API Layer (routes/)"]
        A1[Validazione input]
        A2[Gestione HTTP]
    end

    subgraph SVC["Service Layer (services/)"]
        S1[Logica di business]
        S2[Orchestrazione]
    end

    subgraph REPO["Repository Layer (repositories/)"]
        R1[Accesso dati]
        R2[Query parametrizzate]
    end

    API --> SVC
    SVC --> REPO

    style API fill:#e6f3fa,stroke:#005291,stroke-width:2px
    style SVC fill:#b3d9f0,stroke:#005291,stroke-width:2px
    style REPO fill:#0069b4,stroke:#005291,stroke-width:2px,color:#fff