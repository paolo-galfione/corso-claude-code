# Screencast 3.1: Configurare CLAUDE.md

**Durata**: max 10 minuti
**Modulo**: 3 - L'Architetto Software
**Scopo**: Creare il contesto condiviso del progetto

---

## SLIDE 1: Titolo

**Contenuto slide**:
```
CONFIGURARE CLAUDE.md

Il contratto tra progetto e agente
```

**Testo da leggere**:
"Entriamo nel ruolo dell'Architetto. Il suo primo compito è creare CLAUDE.md: il file che definisce il contesto del progetto per l'agente. È il contratto che guida ogni azione di Claude."

---

## SLIDE 2: Cos'è CLAUDE.md

**Contenuto slide**:
```
COS'È CLAUDE.md

┌─────────────────────────────────────────┐
│  File nella root del progetto           │
│  Letto automaticamente all'avvio        │
│  Contiene tutto ciò che l'agente        │
│  deve sapere per lavorare bene          │
└─────────────────────────────────────────┘

È come onboarding un nuovo sviluppatore:
- Cosa facciamo
- Come lo facciamo
- Cosa NON fare
- Dove trovare cosa
```

**Testo da leggere**:
"CLAUDE.md è un file markdown nella root del progetto. Claude lo legge automaticamente all'inizio di ogni sessione. Pensatelo come il documento di onboarding per un nuovo sviluppatore: spiega cosa fa il progetto, come lavoriamo, cosa evitare, dove trovare le cose."

---

## SLIDE 3: Struttura Consigliata

**Contenuto slide**:
```
STRUTTURA CONSIGLIATA

# Progetto
└─ Nome, scopo, stack tecnologico

# Architettura
└─ Pattern, struttura cartelle, convenzioni

# Regole
└─ Cosa fare SEMPRE, cosa NON fare MAI

# Workflow
└─ Come procedere per task comuni

# Contesto Attuale
└─ Fase corrente, focus, note temporanee
```

**Testo da leggere**:
"Una struttura efficace ha cinque sezioni. Progetto: il cosa e perché. Architettura: come è organizzato. Regole: vincoli non negoziabili. Workflow: procedure standard. Contesto attuale: dove siamo ora nel lavoro."

---

## DEMO 1: Creare CLAUDE.md da Zero

**Cosa mostrare**:

1. Aprire VS Code nella root del progetto backend
2. Creare un nuovo file CLAUDE.md
3. Scrivere la sezione Progetto:

```markdown
# Progetto: Backend Northwind

Backend API REST per la gestione di Customers, Orders e Order Details.
Stack: Node.js, Express, SQLite 3, Knex.js

## Stato
In fase di refactoring da architettura monolitica a 3-tier.
```

4. Mostrare come Claude risponde diversamente PRIMA e DOPO aver creato il file

**Testo da leggere durante la demo**:
"Creiamo CLAUDE.md da zero. Iniziamo con le informazioni base: cosa fa il progetto, lo stack, lo stato attuale. Anche queste poche righe cambiano come Claude interpreta le richieste."

---

## SLIDE 4: Sezione Architettura

**Contenuto slide**:
```
SEZIONE ARCHITETTURA

## Architettura

Pattern: 3-tier (API / Service / Repository)

Struttura:
├── /routes      → Endpoint API, validazione input
├── /services    → Logica di business
├── /repositories→ Accesso dati con Knex.js
├── /models      → Definizioni entità
└── /tests       → Test organizzati per layer

Convenzioni:
- Un file per entità per layer
- Naming: customerRoutes.js, customerService.js
- Metodi CRUD: getAll, getById, create, update, delete
```

**Testo da leggere**:
"La sezione Architettura definisce i pattern e le convenzioni. Dove va cosa, come si chiamano i file, quali metodi standard usare. Quando Claude crea codice, seguirà queste convenzioni automaticamente."

---

## DEMO 2: Aggiungere Regole

**Cosa mostrare**:

1. Aggiungere al CLAUDE.md la sezione Regole:

```markdown
## Regole

### SEMPRE
- Eseguire `npm test` prima di considerare completato un task
- Usare async/await, mai callback
- Validare input nei route handler
- Loggare errori con contesto

### MAI
- Query SQL fuori da /repositories
- Logica di business in /routes
- Commit senza test passati
- Modificare file in /migrations senza chiedere

### CHIEDI CONFERMA
- Prima di eliminare file
- Prima di modificare configurazioni
- Se un test fallisce dopo 2 tentativi
```

2. Testare con un prompt che violerebbe una regola

**Testo da leggere durante la demo**:
"Le regole sono vincoli che l'agente rispetta. SEMPRE, MAI, CHIEDI CONFERMA. Queste regole sono supervisione automatica: non dovete controllare ogni azione, le regole lo fanno per voi."

---

## SLIDE 5: Sezione Workflow

**Contenuto slide**:
```
SEZIONE WORKFLOW

## Workflow

### Nuovo Endpoint
1. Crea route in /routes
2. Crea service in /services
3. Crea/aggiorna repository in /repositories
4. Aggiungi test E2E
5. Aggiungi unit test per service
6. Esegui npm test
7. Aggiorna documentazione OpenAPI

### Bug Fix
1. Scrivi test che riproduce il bug
2. Verifica che il test fallisca
3. Implementa fix
4. Verifica che il test passi
5. Verifica che tutti i test passino
```

**Testo da leggere**:
"I workflow definiscono procedure standard. Come creare un endpoint, come fixare un bug. L'agente segue questi passi senza che dobbiate ripeterli ogni volta. Standardizzazione automatica."

---

## DEMO 3: Contesto Attuale

**Cosa mostrare**:

1. Aggiungere sezione dinamica:

```markdown
## Contesto Attuale

### Fase
Fase 2: Separazione 3-tier

### Focus
- Refactoring endpoint Customers (completato)
- Refactoring endpoint Orders (in corso)
- Refactoring endpoint OrderDetails (da fare)

### Note
- Il campo OrderDate ha un bug nel parsing (issue #123)
- I test su Orders sono flaky, ignorare fallimenti random
```

2. Mostrare come questa sezione si aggiorna durante il lavoro

**Testo da leggere durante la demo**:
"Il Contesto Attuale è la sezione dinamica. Indica dove siamo, cosa stiamo facendo, note temporanee. Questa sezione cambia frequentemente. È il 'stato della mente' del progetto."

---

## SLIDE 6: CLAUDE.md Completo

**Contenuto slide**:
```
ESEMPIO COMPLETO

# Progetto: Backend Northwind
Backend API REST - Node.js, Express, SQLite, Knex.js

## Architettura
[Pattern, struttura, convenzioni]

## Regole
[SEMPRE, MAI, CHIEDI CONFERMA]

## Workflow
[Nuovo endpoint, Bug fix, Refactoring]

## Contesto Attuale
[Fase, Focus, Note]

---

Dimensione tipica: 50-150 righe
Troppo corto = contesto insufficiente
Troppo lungo = rumore, overhead
```

**Testo da leggere**:
"Un CLAUDE.md efficace è tra 50 e 150 righe. Abbastanza per dare contesto, non così lungo da diventare rumore. Se supera le 200 righe, probabilmente state duplicando informazioni che stanno meglio altrove."

---

## SLIDE 7: Best Practice

**Contenuto slide**:
```
BEST PRACTICE

✓ Aggiornare quando cambiano le convenzioni
✓ Sezione "Contesto Attuale" sempre fresca
✓ Regole specifiche e verificabili
✓ Esempi concreti dove serve chiarezza
✓ Versionare con git

✗ Duplicare documentazione esterna
✗ Inserire dettagli implementativi
✗ Regole vaghe ("scrivi codice pulito")
✗ Dimenticare di aggiornarlo
```

**Testo da leggere**:
"Tenete CLAUDE.md aggiornato, specialmente la sezione Contesto. Le regole devono essere specifiche, non vaghe. Versionatelo con git così il team è allineato. Non duplicate documentazione che esiste altrove."

---

## SLIDE 8: Takeaway

**Contenuto slide**:
```
TAKEAWAY

✓ CLAUDE.md è il contratto progetto-agente
✓ Struttura: Progetto, Architettura, Regole, Workflow, Contesto
✓ Le regole sono supervisione automatica
✓ 50-150 righe: abbastanza contesto, poco rumore
✓ Aggiornare frequentemente la sezione Contesto

Prossimo screencast: Custom Commands e Skills
```

**Testo da leggere**:
"CLAUDE.md è il fondamento di tutto. Definisce come l'agente lavora nel vostro progetto. Investite tempo a scriverlo bene, e aggiornatelo. Nel prossimo screencast vedremo come creare Custom Commands per automatizzare task ripetitivi."

---

## Note di Produzione

- La demo deve creare un CLAUDE.md REALE che useremo nel resto del corso
- Mostrare la differenza di comportamento prima/dopo CLAUDE.md
- Il file creato sarà la base per gli screencast successivi
- Tempo: slide 4 min, demo 5 min, margine 1 min
